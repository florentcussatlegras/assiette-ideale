{# meals/model/_wrapper_list.html.twig #}

<div class="flex flex-col my-4 w-full {% if listModal is defined and listModal is same as (true)  %}list-modal{% endif %}">

    <div class="flex flex-col md:flex-row w-full items-start md:items-center justify-between my-4 gap-4">

        <div class="w-full md:w-1/2 pl-4">
            {{ include('meals/model/_filter_calories_form.html.twig') }}
        </div>

        <!-- Recherche par nom -->
        <div class="w-full md:w-1/4">
            <input
                type="text"
                id="meal-search"
                data-model-meal-target="search"
                data-action="input->model-meal#applyFilters"
                placeholder="Nom du repas..."
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
            >
        </div>

    </div>

    <div class="flex flex-col md:flex-row items-start md:items-center md:justify-between gap-4 mb-4">
        <div class="w-full md:w-2/3 overflow-x-auto py-4">
            <div class="flex items-center gap-2 min-w-type-meal-choices">
                {{ render(path('app_type_meal_choices')) }}
            </div>
        </div>
        <div>
            <select
                id="sort-meals"
                data-model-meal-target="sort"
                data-action="change->model-meal#applyFilters"
                class="w-full px-3 py-2 bg-gray-200 text-gray-700"
            >
                <option value="asc">Du moins calorique au plus calorique</option>
                <option value="desc">Du plus calorique au moins calorique</option>
            </select>
            <svg class="w-4 h-4 absolute right-3 top-[2.2rem] text-gray-400 pointer-events-none" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4" />
            </svg>
        </div>
    </div>

    <div 
        {{ stimulus_controller("model-meal-select", {
            urlAddModelMealToMealsDay: path('meal_day_add', {'idMealModel': 0}),
            fromModal: listModal|default(false)
        }) }} 
        class="flex flex-col items-start"
    >

        <div class="flex justify-end mb-4 w-full">
            <button
                data-model-meal-select-target="chooseButton"
                data-model-meal-target="chooseButton"
                class="btn-choose-model-meal px-4 py-2 rounded-lg bg-sky-600 text-white font-bold opacity-50 cursor-not-allowed transition"
                data-action="click->model-meal-select#choose"
                disabled
            >
                Choisir
            </button>
            {# <button
                data-model-meal-select-target="removeButton"
                data-model-meal-target="removeButton"
                class="btn-remove-model-meals px-4 py-2 mt-4 rounded-lg bg-red-700 text-white font-bold opacity-30 cursor-not-allowed transition"
                disabled
            >
                Supprimer la s√©lection
            </button> #}
        </div>

        <div 
            class="container-loader w-full items-center justify-center flex"
            style="height: 240px"
            data-model-meal-target="loader"
        >
            <div class="loader"></div>
        </div>

        <div 
            class="w-full flex flex-col justify-center hidden"
            data-model-meal-target="content"
        >

            {{ include('meals/model/_list.html.twig') }}

        </div>

    </div>

</div>