{% extends "security/_layout.html.twig" %}

{% block title %}S'identifier{% endblock %}

{% block content %}

	<div class="flex flex-col items-center w-full">
		<h1 class="text-4xl font-bold text-white">
			Bienvenue !
		</h1>
		<p class="mt-2 text-xl text-white">Merci de vous identifier</p>
	</div>

	{% if error %}
		<div class="flex justify-center mt-6 text-red-700 w-full">
			{{ error.messageKey|trans(error.messageData, 'security') }}
		</div>
	{% endif %}

	{% for key, messages in app.flashes() %}
		{% for message in messages %}
			<div class="alert-{{ key }} flex items-center w-full h-full rounded-lg border-0 break-all mt-5 gap-3 w-full">
				{{ include('partials/svg/alert-' ~ key ~ '.svg') }}
				<div class="ml-4 flex flex-wrap">
					<div class="font-medium">{{ message }}</div>
				</div>
			</div>
		{% endfor %}
	{% endfor %}

	{% if non_verified_user %}
		<div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4 w-full" role="alert">
			<p>Votre compte n'est pas encore activ√©. Vous devez l'activer avec le code envoy√© par e-mail.</p>
			<form action="{{ path('app_resend_confirmation') }}" method="post" class="mt-2">
				<input type="hidden" name="email" value="{{ non_verified_user.email }}">
				<button type="submit" class="text-sky-600 underline hover:text-sky-700">
					Renvoyer le code
				</button>
			</form>
		</div>
	{% endif %}


	<!-- üöÄ BOUTONS GOOGLE & GITHUB -->
	<div class="flex flex-col items-center mt-6 space-y-3 gap-2 mb-4 w-full">

		<a href="{{ path('connect_google') }}" class="w-full flex items-center justify-center gap-3 bg-white border border-gray-100 hover:bg-gray-100 rounded-lg py-2 transition duration-300">
			<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5">
			<span class="font-medium">Continuer avec Google</span>
		</a>

		<a href="{{ path('connect_github') }}" class="w-full flex items-center justify-center gap-3 bg-white border border-gray-100 hover:bg-gray-100 rounded-lg py-2 transition duration-300">

			<svg class="w-5 h-5" viewbox="0 0 24 24" fill="currentColor" aria-hidden="true">
				<path d="M12 0.297c-6.63 0-12 5.373-12 12 0 5.303
					3.438 9.8 8.205 11.385.6.113.82-.258.82-.577
					0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61
					-.546-1.385-1.333-1.754-1.333-1.754-1.089-.745.084-.729.084-.729
					1.205.084 1.84 1.237 1.84 1.237 1.07 1.834 2.807 1.304
					3.492.997.108-.776.418-1.305.762-1.605
					-2.665-.305-5.466-1.332-5.466-5.93
					0-1.31.468-2.38 1.235-3.22-.135-.303-.54-1.524.105-3.176
					0 0 1.005-.322 3.3 1.23a11.52 11.52 0 0 1 3-.404
					c1.02.005 2.045.138 3 .404 2.28-1.552 3.285-1.23
					3.285-1.23.645 1.652.24 2.873.12 3.176
					.765.84 1.23 1.91 1.23 3.22
					0 4.61-2.805 5.62-5.475 5.92.43.37.81 1.096.81 2.22
					0 1.606-.015 2.896-.015 3.286
					0 .315.21.69.825.57C20.565 22.092 24 17.592
					24 12.297c0-6.627-5.373-12-12-12z"/>
			</svg>
			<span class="font-medium">Continuer avec GitHub</span>
		</a>


	</div>

	<!-- S√©parateur -->
	<div class="flex items-center my-6 w-full">
		<div class="flex-1" style="border: 1px solid white"></div>
		<span class="px-3 text-white leading-none">ou</span>
		<div class="flex-1" style="border: 1px solid white"></div>
	</div>

	<form method="POST" class="security text-sm lg:text-lg w-full">

		<div class="mt-4 flex flex-col gap-3">

			<div>
				<input type="text" name="usernameOrEmail" placeholder="Identifiant ou adresse e-mail" class="block w-full pr-10 bg-white rounded-lg border-none text-gray-900">
			</div>

			<div class="flex flex-col gap-2">

				<div class="w-full text-right mb-3">
					<a class="text-white hover:text-sky-900 font-semibold transition duration-300" href="{{ path('app_forgot_password_request') }}">
						{{ 'link.password.forget'|trans({}, 'security') }}
					</a>
				</div>

				<div data-controller="password-visibility" class="relative flex items-center">

					<input type="password" name="password" placeholder="Mot de passe" data-password-visibility-target="input" spellcheck="false" class="w-full pr-10 bg-white border-none rounded-lg text-gray-900"/>

					{{ include('partials/_button_visibility_pwd.html.twig') }}

				</div>

			</div>

			<div class="flex flex-col gap-4 w-full">

				<div class="w-full">

					<div class="w-full">
						<label for="remember-me" class="remember-label inline-flex items-center gap-3 text-white">
							<input id="remember-me" name="_remember_me" type="checkbox" />

							<span class="font-normal select-none">{{ 'label.rememberme'|trans({}, 'security') }}</span>
						</label>
					</div>

				</div>

			</div>

		</div>

		<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}"/>

		<div class="button-group text-center mt-7">
			<button type="submit" class="bg-sky-800 text-white hover:bg-sky-700 w-full font-bold py-3 text-base cursor-pointer rounded-lg transition duration-300">
				Valider
			</button>
			<div class="mt-7 text-white">Pas encore de compte?
				<br><a href="{{ path('app_register') }}" class="text-white hover:text-sky-900 transition duration-300 font-semibold">Inscrivez-vous en moins de 5 min!</a>
			</div>
		</div>

	</form>

{% endblock %}
