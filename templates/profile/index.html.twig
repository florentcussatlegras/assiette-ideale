{% extends "base.html.twig" %}

{% block title %}{{ parent() }} - Mon profil{% endblock %}

{% block body %}

	<main role="main">

		{{ include("partials/_header.html.twig", { h1_content: 'profile.title'|trans({}, 'profile') }) }}

		<div {{ stimulus_controller('alert-imc-weight-modal') }} class="bg-white text-sm shadow-soft rounded-2xl">

			{# <div class="flex flex:col md:flex-row px-3 uppercase font-bold bg-light-blue text-white rounded-t-lg" role="tablist"> #}
			{# <a href="{{ path('app_profile_index') }}" id="profile-tab" class="py-3 flex items-center active gap-2" role="tab" aria-controls="profile" aria-selected="true"> 
						                    <svg width="18px" height="18px" viewBox="0 0 24 24" fill="#0369a1" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="12" cy="6" r="4" fill="#0369a1"></circle> <path d="M20 17.5C20 19.9853 20 22 12 22C4 22 4 19.9853 4 17.5C4 15.0147 7.58172 13 12 13C16.4183 13 20 15.0147 20 17.5Z" fill="#0369a1"></path> </g></svg>
						                    <span>Profil</span>
						                </a> #}
			{# <a id="settings-tab" data-toggle="tab" data-target="#settings" href="javascript:;" class="py-3 sm:mr-8 flex items-center gap-2" role="tab" aria-selected="false"> 
						                    <svg width="23px" height="23px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7 14C10.623 14 9.74999 13.1046 9.74999 12C9.74999 10.8954 10.623 10 11.7 10C12.7769 10 13.65 10.8954 13.65 12C13.65 12.5304 13.4445 13.0391 13.0789 13.4142C12.7132 13.7893 12.2172 14 11.7 14Z" stroke="#0369a1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.8841 16.063V14.721C16.8841 14.3887 17.0128 14.07 17.2419 13.835L18.1672 12.886C18.6443 12.3967 18.6443 11.6033 18.1672 11.114L17.2419 10.165C17.0128 9.93001 16.8841 9.61131 16.8841 9.27899V7.93599C16.8841 7.24398 16.3371 6.68299 15.6624 6.68299H14.353C14.029 6.68299 13.7182 6.55097 13.4891 6.31599L12.5638 5.36699C12.0867 4.87767 11.3132 4.87767 10.8361 5.36699L9.91087 6.31599C9.68176 6.55097 9.37102 6.68299 9.04702 6.68299H7.73759C7.41341 6.68299 7.10253 6.81514 6.87339 7.05034C6.64425 7.28554 6.51566 7.6045 6.51592 7.93699V9.27899C6.51591 9.61131 6.3872 9.93001 6.15809 10.165L5.23282 11.114C4.75573 11.6033 4.75573 12.3967 5.23282 12.886L6.15809 13.835C6.3872 14.07 6.51591 14.3887 6.51592 14.721V16.063C6.51592 16.755 7.06288 17.316 7.73759 17.316H9.04702C9.37102 17.316 9.68176 17.448 9.91087 17.683L10.8361 18.632C11.3132 19.1213 12.0867 19.1213 12.5638 18.632L13.4891 17.683C13.7182 17.448 14.029 17.316 14.353 17.316H15.6614C15.9856 17.3163 16.2966 17.1844 16.5259 16.9493C16.7552 16.7143 16.8841 16.3955 16.8841 16.063Z" stroke="#0369a1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
						                    <span>Settings</span> 
						                </a> #}
			{# <div class="py-3 flex items-center gap-2 text-sm md:text-base">
						                    <svg width="25px" height="25px" fill="none" viewBox="0 0 24 24" stroke="#fff" id="user" class="text-cool-gray-800 dark:text-cool-gray-200 group-hover:text-purple-600 group-focus:text-purple-600 dark:group-hover:text-purple-50 dark:group-focus:text-purple-50"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
						                    <span>{{ app.user.username }}</span>
						                </div>
						                {% if is_granted('IS_AUTHENTICATED_FULLY') %}
						                    <a href="{{ path('app_profile_password_edit') }}" id="change-password-tab" class="py-3 ml-auto flex items-center gap-2 text-sm" role="tab" aria-selected="false"> 
						                        <svg width="20px" height="20px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="#fff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="Layer_2" data-name="Layer 2"> <g id="invisible_box" data-name="invisible box"> <rect width="48" height="48" fill="none"></rect> </g> <g id="Layer_7" data-name="Layer 7"> <g> <path d="M39,18H35V13A11,11,0,0,0,24,2H22A11,11,0,0,0,11,13v5H7a2,2,0,0,0-2,2V44a2,2,0,0,0,2,2H39a2,2,0,0,0,2-2V20A2,2,0,0,0,39,18ZM15,13a7,7,0,0,1,7-7h2a7,7,0,0,1,7,7v5H15ZM37,42H9V22H37Z"></path> <circle cx="15" cy="32" r="3"></circle> <circle cx="23" cy="32" r="3"></circle> <circle cx="31" cy="32" r="3"></circle> </g> </g> </g> </g></svg>
						                        <span>{% trans from 'profile' %}profile.change_password{% endtrans %}</span> 
						                    </a>
						                {% endif %}
						            </div> #}

				<div class="flex flex-col lg:flex-row border-b border-gray-200"> 
					<div class="flex flex-1 p-5 relative items-start">
						<div class="w-20 h-20 flex-none lg:w-32 lg:h-32 image-fit relative">
							{% if app.user.picture is not null %}
								<img class="rounded-full" alt="Photo de l'utilisateur {{ app.user.username }}" src="{{ app.user.picturePath|imagine_filter('squared_thumbnail_medium') }}">
							{% else %}
								<div class="rounded-full flex items-center justify-center text-6xl h-full border border-slate-300">
									<svg fill="none" class="w-12 h-12 text-slate-300" stroke="currentColor" stroke-width="1.5" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
										<path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"></path>
										<path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"></path>
									</svg>
								</div>
							{% endif %}
						</div>
						<div class="flex flex-col ml-5 mt-2">
							<div class="flex flex-row items-center w-full">
								<div class="sm:whitespace-normal font-semibold text-2xl text-gray-700">{{ app.user.username }}</div>
								<div class="flex items-center">
									{{ include('profile/partials/_icon_edit.html.twig', { element: constant('App\\Service\\ProfileHandler::PARAMETERS') }) }}
								</div>
							</div>
							<div
								class="flex items-center font-bold text-light-blue text-xs md:text-base">
								{# <i data-feather="mail" class="w-4 h-4 mr-2"></i> #}
								<svg viewbox="0 0 24 24" class="w-6 h-6 mr-2" fill="none" xmlns="http://www.w3.org/2000/svg">
									<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
									<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
									<g id="SVGRepo_iconCarrier">
										<path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 5.25L3 6V18L3.75 18.75H20.25L21 18V6L20.25 5.25H3.75ZM4.5 7.6955V17.25H19.5V7.69525L11.9999 14.5136L4.5 7.6955ZM18.3099 6.75H5.68986L11.9999 12.4864L18.3099 6.75Z" fill="#0EA5E9"></path>
									</g>
								</svg>
								{{ app.user.email }}
							</div>
						</div>
					<div class="absolute right-0 -bottom-4 lg:bottom-2 py-2 rounded-md flex items-center gap-2 w-full px-5">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="#0EA5E9" class="mb-1">
							<path d="M12 2C9.243 2 7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5zm-3 8V7c0-1.654 1.346-3 3-3s3 1.346 3 3v3h-6zm-1 2h8v10H8V12z"/>
						</svg>
						<a href="{{ path('app_profile_password_edit') }}" class="text-light-blue">Modifier le mot de passe</a>
					</div>
				</div>
				<div class="relative flex-1 p-5 pt-5">
					<div class="flex flex-col justify-center items-center lg:items-start">
						<div
							class="flex items-center w-full">
							{# <img src="https://img.icons8.com/ios/25/000000/gender.png" class="mr-2"/> #}
							<label class="flex items-center w-24 justify-between text-sm">
								<span>{% trans from 'profile' %}profile.gender.label1{% endtrans %}</span>
							</label>
							<span>
								{{ app.user.gender.name|trans({}, 'profile')|default("Vous n'avez pas renseigné votre genre") }}
							</span>
							{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::GENDER')}) }}
						</div>
						<div class="flex items-center mt-2 w-full">
							<label class="flex items-center w-24 justify-between text-sm">
								<span>{% trans from 'profile' %}profile.age.label1{% endtrans %}</span>
							</label>
							<span>
								{{ app.user.ageRange.description|trans({}, 'profile')|default("Vous n'avez pas renseigné votre tranche d'âge") }}
							</span>
							{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::AGE_RANGE')}) }}
						</div>
						<div class="flex items-center mt-2 w-full">
							<label class="flex items-center w-24 justify-between text-sm">
								<span>{% trans from 'profile' %}profile.height.label1{% endtrans %}</span>
							</label>
							<span>
								{{ 'profile.height.value'|trans({'value': app.user.height}, domain='profile')|default("Vous n'avez pas renseigné votre taille") }}
							</span>
							{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::HEIGHT')}) }}
						</div>
						<div class="flex items-center mt-2 w-full">
							<label class="flex items-center w-24 justify-between text-sm">
								<span>{% trans from 'profile' %}profile.weight.label1{% endtrans %}</span>
							</label>
							{{ 'profile.weight.value'|trans({'value': app.user.weight}, domain='profile')|default("Vous n'avez pas renseigné votre poids") }}
							{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::WEIGHT')}) }}
						</div>
					</div>
				</div>
			</div>

			<div class="flex flex-col lg:flex-row">
				<div class="relative flex-1 p-5">
					<div class="flex items-center gap-2">
						<label class="text-sm font-bold uppercase">{% trans from 'profile' %}profile.physical_activities.label{% endtrans %}</label>
					</div>
					<div class="flex flex-1 tems-center justify-center">
						<div class="flex flex-col justify-center items-center my-4 md:my-2 w-full">
							<div class="flex items-center w-full">
								<span>{{ app.user.hour|trans({}, 'profile')|default("Vous n'avez pas indiqué vos horaires") }}</span>
								{{ include('profile/partials/_icon_edit.html.twig', { element: constant('App\\Service\\ProfileHandler::HOURS') }) }}
							</div>
							<div class="flex items-center justify-start mt-2 w-full">
								<span>{{ app.user.workingType.description|trans({}, 'profile')|default("Vous n'avez pas saisi votre type de métier") }}</span>
								{{ include('profile/partials/_icon_edit.html.twig', { element: constant('App\\Service\\ProfileHandler::WORK') }) }}
							</div>
							<div class="flex items-center justify-start mt-2 w-full">
								<span>{{ app.user.sportingTime.description|trans({}, 'profile')|default("Vous n'avez pas saisi votre type de métier") }}</span>
								{{ include('profile/partials/_icon_edit.html.twig', { element: constant('App\\Service\\ProfileHandler::SPORT') }) }}
							</div>
						</div>
					</div>
				</div>
				<div class="relative flex-1 p-5">
					<div class="flex items-center gap-3 text-sm uppercase font-bold">
						<span>{% trans from 'profile' %}profile.diets.label1{% endtrans %}</span>
						{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::DIETS')}) }}
					</div>
					<div class="flex flex-col justify-center items-center lg:items-start mt-2 mb-6 relative">
						{% if app.user.diets is not empty %}
							<ul class="flex flex-wrap justify-start gap-2 w-full">
								{% for diet in app.user.diets %}
									<li>
										<span class="inline-flex items-center justify-center px-2 py-3 font-bold leading-none text-white bg-green-700 rounded">
											{{ diet.name }}
										</span>
									</li>
								{% endfor %}
							</ul>
						{% else %}
							{% trans from 'profile' %}profile.diets.none{% endtrans %}
						{% endif %}
					</div>
					<div
						class="flex items-center gap-3 text-sm uppercase font-bold">
						{# {{ include('partials/svg/profile/no-meat.svg') }} #}
						<span>{% trans from 'profile' %}profile.forbidden_foods.label1{% endtrans %}</span>
						{{ include('profile/partials/_icon_edit.html.twig', {element: constant('App\\Service\\ProfileHandler::FORBIDDEN_FOODS')}) }}
					</div>
					<div class="flex flex-col justify-center items-center lg:items-start mt-2 relative">
						{% if app.user.forbiddenFoods is not empty %}
							<ul class="flex flex-wrap justify-start gap-2 w-full">
								{% for forbiddenFood in app.user.forbiddenFoods %}
									<li>
										<span class="inline-flex items-center justify-center px-2 py-3 font-bold leading-none text-white bg-dark-blue rounded">
											{{ forbiddenFood.name }}
										</span>
									</li>
								{% endfor %}
							</ul>
						{% else %}
							{% trans from 'profile' %}profile.forbidden_foods.none{% endtrans %}
						{% endif %}
					</div>
					{# <div class="button-group absolute right-5 bottom-0 px-3 py-2 bg-light-blue rounded-md">
										                        <a href="{{ path('app_profile_edit', {step : 'food'}) }}">
										                            <svg class="w-6 h-6 text-dark-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
										                        </a>
										                    </div> #}
				</div>
				{# <div class="mt-6 lg:mt-0 flex-1 flex items-center justify-center px-5 border-t lg:border-0 border-gray-200 dark:border-dark-5 pt-5 lg:pt-0">
								                    <div class="text-center rounded-md w-20 py-3">
								                        <div class="font-medium text-theme-17 dark:text-theme-3 text-xl">{{ app.user.energy }}</div>
								                        <div class="text-gray-600 font-semibold">ENERGIE</div>
								                    </div>
								                </div> #}
			</div>

			<div class="flex flex-col md:flex-row border-t border-gray-200">

				<div class="lg:mt-0 w-full md:w-1/2 flex items-end justify-center py-6">

					<div class="w-3/5 relative">
						{{ render(controller('App\\Controller\\ProfileController::energy'))}}

						<div class="button-group absolute bottom-0 -right-10">
							{{ include('profile/partials/_icon_edit.html.twig', { element: constant('App\\Service\\ProfileHandler::ENERGY') }) }}
						</div>

					</div>

				</div>

				<div class="lg:mt-0 w-full md:w-1/2 flex items-center justify-center px-5 relative py-6">

					<div class="w-3/5">
						{{ render(controller('App\\Controller\\ProfileController::imc')) }}
					</div>

					{# <div class="text-center rounded-md py-3 relative w-2/5">
										
										                        <div class="bg-green-100 rounded-lg w-full p-4">
										                            <span class="pb-2 flex items-center justify-center text-lg font-medium text-green-700 border-b border-green-700 w-full">Votre IMC</span>
										                            <div class="pt-4 flex items-center justify-center my-2 text-2xl text-green-700 font-bold">
										                                {% if app.user.imc %}
										                                    {{ app.user.imc|round(0, 'floor') }}
										                                {% else %}
										                                    <span class="text-sm">Il nous manque des informations afin que nous puissions calculer votre IMC.</span>
										                                {% endif %}
										                            </div>
										                        </div>
										
										                    </div> #}

				</div>

			</div>

		</div>


	</main>

{% endblock %}
